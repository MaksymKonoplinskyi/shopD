FROM node:20-alpine3.18

WORKDIR /app

COPY package.json .

RUN npm install

COPY . .

ENV PORT 1337
# ENV DATABASE_SSL_CA '-----BEGIN CERTIFICATE-----\nMIIEQTCCAqmgAwIBAgIUXwrSmZ4TuVnsNGLGzfNYs+w+6kAwDQYJKoZIhvcNAQEM\nBQAwOjE4MDYGA1UEAwwvZWEyMjlmYjAtMjRiNS00MjcwLTg4YTYtZjI2MjA1OGNh\nY2RlIFByb2plY3QgQ0EwHhcNMjMxMjMwMTYyMzUxWhcNMzMxMjI3MTYyMzUxWjA6\nMTgwNgYDVQQDDC9lYTIyOWZiMC0yNGI1LTQyNzAtODhhNi1mMjYyMDU4Y2FjZGUg\nUHJvamVjdCBDQTCCAaIwDQYJKoZIhvcNAQEBBQADggGPADCCAYoCggGBALGXGNSF\nGBPkWu1J2WmnwYUfxc1kqf96t+38qHMC6JItZsD87HJowyu6C3UUiyN+tW9FlU5O\nQslXTXZIfN9fBSTFC+9z9H3NZOEHc5Th2FBLFslNdi1TJTr97XGqZxEhNn9PK9xD\nd3zZvdXUwNl6KCiqnDfRx+8Gk5uqUYM13Zzm/SuRaEHAX08wLbsPFOOau6MlsTzA\nLDJ3+g3CthjesDj8HVTPpzzNdin0qBLhAlT3k7cVRL492Zt9ihJ+lAl9ypuefNW7\nouWiz0X70DP07r8b9wAX//gYMZYY2UCWOXPiWJcbdzf40XAcNZKPQLQhS+eQeIwl\nyDPOuLR17Su9elYwHzbs2XiaP/IpwmAoPc/90XEUVZ8SxfMk0IqXq+MyOS/9ZWL0\nLESqqDZTbhI6f2VLySLl23o6OncnlLRYHoP9hwELEzeIwDZrVBiwS/N8yFWaKtVr\ndkHsfRwRKfuLnB8GbtkAV6eN1psy9oLTRaNGgOIDeSVjtt9EfEJ4PQui/wIDAQAB\noz8wPTAdBgNVHQ4EFgQULZVO0fEAEdV6Cvmg8tLfkiZScvswDwYDVR0TBAgwBgEB\n/wIBADALBgNVHQ8EBAMCAQYwDQYJKoZIhvcNAQEMBQADggGBADa2e/0eWuSHCmlv\nM0o4t7KQagN/MLy5W/2PHvzrwx/CHtfGRMFt0urSykF84XMwO25OGr/Q0OPWAIHH\no4wAnmg75x+9uHffhRyDzVPQEBpb+FS1Mk67k9RcXsZnhKHEARls6FqHndLabr0t\nSyIrRuXTOwbXj+P6XyL868GoYZvpbGaJmx3rBxlJVmWNqvbKGz+dikQeGkKFTaEe\nSjvvshvKgi3B+a4yz77R+y5T+M1DKOg4GIbtgPDO9mvsE0C15LJ0c4OTyuAMnogD\nP48yeeefBldYKtiy2letcc9HlvnpdgmwLndO6hwXCiy7wCwPOQ/cdh/Xvc96MU7K\nOsSppMsCQGnrYXQrBd3QCrUL9ZYfmEcpHnsJK5FI1sWgvopeRAOebcVFn750R1Ph\nwiwMghA6qmxfvTv0xhkd2hzfgdxC3XNt361zRFsp1yUAcRAPHn2NPAewE13k3Fh4\nmeWNAwqBRy4mApuZU0euCQW9TkjiYC3N/fNP5d4pP5xDC6K1RQ==\n-----END CERTIFICATE-----'
EXPOSE $PORT
EXPOSE 21481
EXPOSE 6000

# VOLUME [ "/app/data" ]

CMD [ "npm", "run", "dev"]